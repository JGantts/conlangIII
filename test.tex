\documentclass[12pt]{article}

% -----------------------------
% Packages
% -----------------------------

% For advanced font selection
\usepackage[linguistics]{forest}

\usepackage{fontspec}

% For colorful and modern layouts
\usepackage{xcolor}
\usepackage{geometry}
\usepackage{graphicx}
\usepackage{tikz}
\usepackage{titlesec}
\usepackage{parskip} % Adds space between paragraphs
\usepackage{hyperref}
\usepackage{fancyhdr}
\usepackage{marginnote} % For margin notes
\usepackage{tikz-qtree}
\usepackage{float}
\usepackage{subcaption}

\usepackage[block]{leipzig}
\usepackage{gb4e}
\usepackage{typgloss}

% -----------------------------
% Theme Colors
% -----------------------------

\definecolor{primary}{RGB}{47, 128, 190}    % Muted Blue
\definecolor{secondary}{RGB}{192, 57, 43}   % Deep Red
\definecolor{accent}{RGB}{39, 174, 96}      % Cool Green
\definecolor{background}{RGB}{255, 255, 255} % Softer Light Gray
\definecolor{link}{RGB}{128, 0, 128}       % Regal Purple

% -----------------------------
% Page Geometry
% -----------------------------

\geometry{
    a4paper,
    left=1in,
    right=1in,
    top=1in,
    bottom=1in
}

% -----------------------------
% Fonts
% -----------------------------

\setmainfont{NotoSansDisplay}[
    Path=fonts/,
    Extension=.ttf,
    UprightFont=*-Regular,
    BoldFont=*-Bold,
    ItalicFont=*-Italic,
    BoldItalicFont=*-BoldItalic,
]

\newfontfamily{\textthin}{NotoSansDisplay}[
    Path=fonts/,
    Extension=.ttf,
%    UprightFont=*-Thin, ItalicFont=*-ThinItalic,
    UprightFont=*-Light, ItalicFont=*-LightItalic,
]


% -----------------------------
% Section Formatting
% -----------------------------

\titleformat{\section}
  {\color{primary}\normalfont\Large\bfseries}
  {\thesection}{1em}{}

\titleformat{\subsection}
  {\color{secondary}\normalfont\large\bfseries}
  {\thesubsection}{1em}{}

\titleformat{\subsubsection}
  {\color{accent}\normalfont\normalsize\bfseries}
  {\thesubsubsection}{1em}{}

% -----------------------------
% Header and Footer
% -----------------------------

\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\textcolor{primary}{\leftmark}}
\fancyhead[R]{\textcolor{secondary}{\thepage}}
\fancyfoot[C]{\textcolor{accent}{My LaTeX Document}}

% -----------------------------
% Hyperlinks
% -----------------------------

\hypersetup{
    colorlinks=true,
    linkcolor=link,
    urlcolor=accent,
    citecolor=secondary
}

% -----------------------------
% Title Styling
% -----------------------------

\newcommand{\customtitle}[1]{
    \begin{center}
        \vspace*{2cm}
        {\Huge\bfseries\color{primary} #1}\\
        \vspace{0.5cm}
        {\Large My Third Major Conlang Attempt}\\
        \vspace{1cm}
    \end{center}
    \vspace{1cm}
    \hrule
    \vspace{1cm}
}

% -----------------------------
% Decorative Elements with TikZ
% -----------------------------

\newcommand{\decorativeLine}{
    \begin{tikzpicture}
        \draw [primary, thick] (0,0) -- (\linewidth,0);
        \draw [secondary, thick] (0,0.1) -- (\linewidth,0.1);
    \end{tikzpicture}
}

\newcommand{\exref}[1]{(\ref{#1})}

% -----------------------------
% Tree Decoration
% -----------------------------

\tikzset{
  my colour/.style={text=#1},
  my tree/.style={
    font=\textthin,
  },
  my leaf/.style={
  },
}
\forestset{
  every leaf node/.style={
    if n children=0{#1}{}
  },
  every tree node/.style={
    if n children=0{}{#1}
  },
}

\newcommand{\leafnode}[2]{\textthin{#2} \\ #1 }

% -----------------------------
% Gloss Terms
% -----------------------------

\newleipzig{vbz}{vbz}{verbalizer}
\newleipzig{c}{c}{chaos class}
\newleipzig{l}{l}{life class}
\newleipzig{o}{o}{order class}
\newleipzig{d}{d}{death class}
\newleipzig{hab}{hab}{habitual}
\newleipzig{vol}{vol}{voluntary}
\newleipzig{pprt}{pprt}{past participle}
\newleipzig{aprt}{aprt}{active participle}
\newleipzig{sup}{sup}{superessive}
\newleipzig{pert}{pert}{pertingent}
\newleipzig{dummy}{dummy}{dummy}

\makeglossaries

\glsdisablehyper
\renewcommand{\leipzigfont}[1]{\color{primary}{\textsc{#1}}}

% -----------------------------
% Document
% -----------------------------

\begin{document}
\pagecolor{background}

% Custom Title
\customtitle{Welcome to JGantts Conlang III}

% Introduction Section
\section{Intro}
This is my third major conlang attempt since 2020-ish.

Some of the \textbf{greatest} 
{\textthin discoveries} in \underline{science} 
were made by \textbf{\textit{accident}}.


\newpage

\begin{exe}
\ex \label{ex:whisper1}
Melibe dçaraqueçv uinalo iga puina.
\gll
m-        elibe dç-  ar-     aqueçv  u-     inalo  iga pu-        ina\\
NOM.C.PL- star  HAB- VBZ.IPFV- whisper ACC.O- secret to  ACC.L.VOL- 3PL\\
\trans `The stars whisper secrets to those who listen.'\\
\end{exe}

\scalebox{0.75}{
\begin{forest}
  for tree={
    every leaf node={my leaf},
    every tree node={my tree},
    parent anchor=south,
    child anchor=north,
    edge=primary
  }
[ IP
    [ NP
        [ SPEC
            [ \leafnode{m}{\Nom{}.\C{}.\Pl{}} ]
        ]
        [ N
            [ \leafnode{elibe}{star(s)} ]
        ]
    ]
    [ I'
        [ I
	        [\leafnode{dç}{\Hab{}} ]
        ]
        [ IP
            [ I
              	[\leafnode{ar}{\Vbz{}.\Ipfv{}} ]
			]
			[ VP
                [ V'
                    [ V 
                    	[\leafnode{aqueçv}{whisper} ]
                    ]
                    [ NP
                        [ SPEC
    	                    [\leafnode{u}{\Acc{}.\O{}.\Pl{}} ]
                        ]
                        [ N
                        	[\leafnode{inalo}{secret(s)} ]
                        ]
                    ]
                ]
                [ PP
                    [ P
                        [ \leafnode{iga}{\All{}} ]
                    ]
                    [ NP
                        [ SPEC
                        	[ \leafnode{pu}{\Acc{}.\L{}.\Vol{}} ]
                        ]
                        [ N
                            [ \leafnode{ina}{\Third{}\Pl{}} ]
                        ]
                    ]
                ]
            ]
        ]
    ]
]
\end{forest}
}

Example \exref{ex:whisper1} shows us how Voluntary Accusative can be used.\\

\newpage

\begin{exe}
\ex \label{voluntary}
\begin{xlist}
\ex \label{voluntary:invol}
Bedi ogvbino metil.
\gll
b-         edi og-     vbino     m       etil \\
ACC.SG/DU- 1SG PST.PFV hear/tell NOM.PL- birds \\
\trans `I hear the birds.'\\

\ex \label{voluntary:vol}
Puedi ogvbino metil.
\gll
pu-            edi og-     vbino     m       etil \\
ACC.SG/DU.VOL- 1SG PST.PFV hear/tell NOM.PL- birds \\
\trans `I listened to the birds.'\\
\end{xlist}
\end{exe}

Example \exref{voluntary} shows us how Voluntary Accusative can be used.
\exref{voluntary:invol} features the standard (involuntary) Accustative to mean "hear".
\exref{voluntary:vol} meanwhile, shows the Voluntary Accustative to mean "listen".

\begin{exe}
\ex \label{fall}
\begin{xlist}
\ex \label{fall:invol}
Tcitti bedi ogormir uilompi.
\gll
tc-       itti  b-         edi og-     ormir uilompi\\
NOM.SG/DU DUMMY ACC.SG/DU- 1SG PST.PFV fall  downstairs\\
\trans `I fell downstairs.'\\

\ex \label{fall:vol}
Tcitti puedi ogormir uilompi.
\gll
tc-       itti  pu-            edi og-     ormir    uilompi\\
NOM.SG/DU DUMMY ACC.SG/DU.VOL- 1SG PST.PFV go(down) downstairs\\
\trans `I went downstairs.'\\
\end{xlist}
\end{exe}

\newpage

\begin{exe}
\ex \label{ex:catwindow}
Tcipo ogitcuido bino mvho gueno, vrotizvlo uitto otemvsti yvno gueno.
\gll
tc-         ipo og-     itcuido bino {mvho gueno} vr-   ot-      izvlo u-          itto ot-      emvsti yvno gueno\\
NOM-C.SG/DU cat PST.PFV perch   SUP  windowsill   APRT- PST.IPFV watch C.ACC.SG/DU rain PST.IPFV flow   PERT glass\\
\trans `The cat perched on the windowsill, watching the rain cascade down the glass.'\\
\end{exe}

\scalebox{1}{
\begin{forest}
  for tree={
    every leaf node={my leaf},
    every tree node={my tree},
    parent anchor=south,
    child anchor=north,
    edge=primary
  }
[ VP
    [ NP
        [ \leafnode{tcipo}{cat.\Nom{}} ]
    ]
    [ V'
        [V'
        	[VP
        		[ V'
					[V'
    					[ V
    	        			[ \leafnode{ogitcuido}{perched.\Pst{}.\Pfv{}} ]	
    					]
            		]
        	        [PP [on the windowsill,roof ] ]
	        	]
            ] 
        ]
	        [CP 
	        	[watching...,roof]
			]
    ]
 ]
\end{forest}
}

Example \exref{ex:catwindow} shows us how Participles can be used.

\newpage

\setglossarysection{section}
\printglosses

\end{document}
